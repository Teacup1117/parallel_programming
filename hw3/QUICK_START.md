# 快速使用指南

## 🚀 立即使用

### 1. 編譯
```bash
make
```

### 2. 直接使用（預設啟用動態負載平衡）

**正常使用（動態負載平衡已啟用）：**
```bash
./hw3 -0.522 2.874 1.340 0 0 0 512 512 output.png
# 自動使用動態負載平衡！
```

**如果需要測試靜態模式：**
```bash
DISABLE_LB=1 ./hw3 -0.522 2.874 1.340 0 0 0 512 512 output_static.png
```

### 3. 觀察性能
輸出會顯示使用的模式：
```
Render time: 120.00 ms (mode=dynamic)  ← 動態模式
```

---

## 📊 快速決策樹

```
動態負載平衡已預設啟用！ ✅

需要測試靜態模式嗎？
│
├─ 否 → 直接使用 ./hw3 ...
│       享受自動負載平衡！
│
└─ 是 → DISABLE_LB=1 ./hw3 ...
        比較性能差異
```

---

## 🔧 環境變數控制

```bash
# 正常使用（動態負載平衡，預設）
./hw3 ...

# 如需關閉動態負載平衡（測試用）
DISABLE_LB=1 ./hw3 ...

# 或設定環境變數
export DISABLE_LB=1
./hw3 ...
```

---

## 📈 預期結果

**動態負載平衡已預設啟用，所有場景自動優化！**

| 場景類型 | 動態模式（預設）✅ | 靜態模式 | 改善 |
|---------|------------------|---------|------|
| 簡單均勻 | 105ms | 100ms | -5% (可接受) |
| 中等複雜 | 120ms ⭐ | 150ms | +20% |
| 極度不均 | 180ms ⭐⭐⭐ | 300ms | +40% |

**大部分Mandelbulb場景都會有顯著改善！**

---

## 🧪 一鍵測試

```bash
chmod +x test_dynamic_lb.sh
./test_dynamic_lb.sh
```

自動測試多種場景和解析度，輸出完整報告。

---

## 💡 核心原理（1分鐘版）

**預設動態模式:**
- Thread 從佇列不斷領取任務
- 永遠不閒置，直到所有像素完成
- **自動適應任何負載分布！**
- **無需手動判斷場景複雜度**

**靜態模式（僅用於比較）:**
- Thread 0 處理像素 (0,0) → 固定
- 如果 (0,0) 很簡單，Thread 0 快速完成後就閒置

---

## ⚡ Pro Tips

1. **直接使用:** 無需任何配置，動態負載平衡已自動啟用
2. **性能比較:** 想比較？用 `DISABLE_LB=1` 測試靜態模式
3. **所有場景:** 動態模式適用於所有場景，無需擔心
4. **微小overhead:** 均勻場景可能慢5%，但不均勻場景快20-40%

---

## 🐛 問題排查

**想確認動態模式已啟用？**
- 檢查輸出: `mode=dynamic` ✅

**想測試靜態模式？**
- 使用 `DISABLE_LB=1 ./hw3 ...`
- 檢查輸出: `mode=static`

**輸出圖片不同？**
- 應該幾乎相同
- 微小差異是正常的浮點運算順序差異

---

## 📚 深入了解

詳細說明請參考：
- `README_DYNAMIC_LB.md` - 完整技術文檔
- `test_dynamic_lb.sh` - 自動化測試腳本

---

**動態負載平衡已預設啟用，享受更快的渲染速度！** 🎉🚀
