# â±ï¸ æ€§èƒ½æ¸¬é‡æŒ‡å—

## å·²æ·»åŠ çš„æ€§èƒ½æ¸¬é‡

ä½ çš„ä»£ç¢¼ç¾åœ¨æœƒè¼¸å‡ºä»¥ä¸‹æ€§èƒ½ä¿¡æ¯ï¼š

### 1. **Per-Block æœå°‹æ™‚é–“**
```
Found Solution!!
nonce: 5ea01346 (0x5ea01346)
Found in batch #1 (searched 0 million nonces)
Total search time: 45 ms
Total solve time: 123 ms
```

**å«ç¾©**ï¼š
- `Total search time: 45 ms` - GPU æœå°‹è€—æ™‚
- `Total solve time: 123 ms` - æ•´å€‹ block çš„è€—æ™‚ï¼ˆåŒ…å« merkle rootã€target è¨ˆç®—ç­‰ï¼‰

### 2. **ç¸½ç¨‹åºåŸ·è¡Œæ™‚é–“**
```
=====================================
Total program execution time: 1234 ms
=====================================
```

**å«ç¾©**ï¼š
- æ‰€æœ‰ 4 å€‹ block çš„ç¸½è€—æ™‚

---

## ğŸ“Š  å¦‚ä½•è§£è®€é€™äº›æ•¸æ“š

### å ´æ™¯åˆ†æ

å‡è¨­è¼¸å‡ºå¦‚ä¸‹ï¼š
```
Block 1: Total search time: 50 ms
Block 2: Total search time: 150 ms
Block 3: Total search time: 800 ms
Block 4: Total search time: 200 ms

Total program execution time: 1200 ms
```

**åˆ†æ**ï¼š
1. âœ… Block 1-2: å¿«é€Ÿæ‰¾åˆ°ç­”æ¡ˆï¼ˆ<200msï¼‰
2. âš ï¸ Block 3: éœ€è¦æœå°‹ 800msï¼Œèªªæ˜ç­”æ¡ˆåœ¨è¼ƒé ä½ç½®
3. âœ… Block 4: ä¸­ç­‰é€Ÿåº¦

**çµè«–**ï¼š
- å¹³å‡æ¯å€‹ block ç´„ 300ms
- ä¸»è¦æ™‚é–“æ¶ˆè€—åœ¨ GPU æœå°‹
- åƒæ•¸æ”¹è®Šå°å·²ç¶“å¿«çš„ blocks ç„¡æ•ˆï¼ˆBlock 1-2ï¼‰

---

## ğŸ”  æ€§èƒ½ç“¶é ¸è¨ºæ–·

### å¦‚æœæ‰€æœ‰ blocks éƒ½å¾ˆå¿«ï¼ˆ<100msï¼‰
```
æ‰€æœ‰ block éƒ½æ˜¯ 50-100ms
Total program: 500ms
```
â†’ **ç­”æ¡ˆéƒ½åœ¨å‰é¢**ï¼Œåƒæ•¸æ”¹è®Šç„¡æ•ˆï¼Œæ¶æ§‹æ‰æ˜¯ç“¶é ¸

### å¦‚æœæŸå€‹ block ç‰¹åˆ¥æ…¢ï¼ˆ>1000msï¼‰
```
Block 3: 2500 ms
```
â†’ **ç­”æ¡ˆåœ¨è¼ƒé ä½ç½®**ï¼Œå¯èƒ½éœ€è¦å¢åŠ  batch_size æˆ– GPU åƒæ•¸

### å¦‚æœæœå°‹æ™‚é–“ â‰  è§£æ±ºæ™‚é–“
```
Total search time: 100 ms
Total solve time: 200 ms
```
â†’ **100ms ç”¨æ–¼ GPU æœå°‹ï¼Œ100ms ç”¨æ–¼ CPU è¨ˆç®—**ï¼ˆmerkle rootã€SHA256 é©—è­‰ç­‰ï¼‰

---

## ğŸ’¡ ä½¿ç”¨é€™äº›æ•¸æ“šå„ªåŒ–

### æ¸¬è©¦ 1ï¼šæ”¹è®Š batch_size
```cuda
// è©¦è©¦ä¸åŒçš„å€¼
unsigned int batch_size = 10000000;  // 10M (åŸå§‹)
unsigned int batch_size = 50000000;  // 50M (ä¸­ç­‰)
unsigned int batch_size = 100000000; // 100M (æ¿€é€²)
```

**æ¯”è¼ƒåŸ·è¡Œæ™‚é–“**ï¼Œæ‰¾åˆ°æœ€å„ªå€¼ã€‚

### æ¸¬è©¦ 2ï¼šæ”¹è®Š blocksPerGrid
```cuda
// è©¦è©¦ä¸åŒçš„å€¼
int blocksPerGrid = 1024;   // åŸå§‹
int blocksPerGrid = 2048;   // ä¸­ç­‰
int blocksPerGrid = 4096;   // æ¿€é€²
```

**åœ¨æ¯æ¬¡åƒæ•¸æ”¹è®Šå¾Œé‹è¡Œï¼Œæ¯”è¼ƒ**ï¼š
```
Total program execution time
```

### æ¸¬è©¦ 3ï¼šè­˜åˆ¥çœŸæ­£çš„ç“¶é ¸
å°æ¯”ä»¥ä¸‹æ™‚é–“ï¼š
- `search time` - GPU è¨ˆç®—
- `solve time - search time` - CPU é–‹éŠ·ï¼ˆé€šå¸¸ 30-50msï¼‰

å¦‚æœ CPU é–‹éŠ·å¾ˆå¤§ï¼Œå„ªåŒ– CPU éƒ¨åˆ†æ¯”å„ªåŒ– GPU å‚æ•¸æ›´æœ‰æ•ˆã€‚

---

## ğŸ“ˆ æœŸæœ›çš„æ€§èƒ½è¡¨ç¾

### å¥½çš„æ€§èƒ½
```
Total program execution time: 800-1500 ms
Average per block: 200-400 ms
```

### éœ€è¦å„ªåŒ–çš„æ€§èƒ½
```
Total program execution time: > 3000 ms
```

### æœ€å„ªæ€§èƒ½ï¼ˆä½¿ç”¨ Streams + Pinned Memoryï¼‰
```
Total program execution time: < 500 ms
ï¼ˆéœ€è¦é‡æ§‹ä»£ç¢¼ï¼Œä½†å¯é”åˆ° 3-5x æå‡ï¼‰
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

1. **å…ˆé‹è¡Œæ¸¬è©¦çœ‹å¯¦éš›æ•¸æ“š**
   - ç·¨è­¯ä¸¦é‹è¡Œ
   - è¨˜éŒ„ `Total program execution time`

2. **åˆ†ææ…¢ block å’Œå¿« block çš„å€åˆ¥**
   - å¿«çš„ blockï¼šç­”æ¡ˆåœ¨å‰é¢ï¼Œç„¡æ³•å„ªåŒ–
   - æ…¢çš„ blockï¼šç­”æ¡ˆåœ¨å¾Œé¢ï¼Œå¯å˜—è©¦å„ªåŒ–

3. **åªé‡å°æ…¢çš„ block å„ªåŒ–**
   - ä¸è¦ç›²ç›®æ”¹å…¨å±€åƒæ•¸
   - è€ƒæ…®å‹•æ…‹èª¿æ•´ batch_size

4. **å¦‚æœéœ€è¦ 3-5x å„ªåŒ–**
   - è€ƒæ…®ä½¿ç”¨ CUDA Streams
   - åƒæ•¸èª¿æ•´å·²ç¶“é”åˆ°æ¥µé™

---

## æŸ¥çœ‹å¯¦æ™‚æ€§èƒ½çš„æŠ€å·§

### ç¦ç”¨ Debug è¼¸å‡º
å¦‚æœæƒ³è¦æ›´æº–ç¢ºçš„ GPU æ™‚é–“æ¸¬é‡ï¼Œå¯ä»¥è¨»é‡‹æ‰é€™äº›ï¼š
```cuda
// printf("merkle root(little): "); 
// printf("Target value (big): ");
// printf("Searching for nonce using GPU...\n");
```

### è¨ˆç®—æ¯å€‹ nonce çš„æœå°‹æ™‚é–“
```
æœå°‹æ™‚é–“ï¼ˆmsï¼‰ / batch_size çš„ nonce æ•¸ = æ¯å€‹ nonce çš„æ™‚é–“ï¼ˆå¾®ç§’ï¼‰
```

ä¾‹å¦‚ï¼š
```
50 ms / 10000000 nonces = 5 ç´ç§’/nonceï¼ˆç†æƒ³æƒ…æ³ä¸‹ï¼‰
```

---

## é‡è¦æé†’

- âœ… ç¾åœ¨çš„æ¸¬é‡å·²ç¶“åŒ…å«äº†æ‰€æœ‰é–‹éŠ·
- âœ… `Total program execution time` æ˜¯æœ€çœŸå¯¦çš„æ€§èƒ½æŒ‡æ¨™
- âš ï¸ æ”¹è®Š batch_size/threads/blocks å°å·²å¿«çš„ blocks ç„¡æ•ˆ
- âš ï¸ å¦‚æœæ‰€æœ‰ blocks éƒ½å¿«ï¼ˆ<100msï¼‰ï¼Œæ¶æ§‹è€Œéåƒæ•¸æ˜¯ç“¶é ¸
